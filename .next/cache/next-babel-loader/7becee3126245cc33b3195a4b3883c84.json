{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\nimport { Editor } from '@tinymce/tinymce-react';\n\nconst Formfield = ({\n  formdata,\n  change,\n  id,\n  Prefix,\n  press\n}) => {\n  const showError = () => {\n    let errorMessage = null;\n\n    if (formdata.validation && !formdata.valid) {\n      errorMessage = __jsx(\"span\", null, formdata.validationMessage);\n    }\n\n    return errorMessage;\n  };\n\n  const renderTemplate = () => {\n    let formTemplate = null;\n\n    switch (formdata.element) {\n      case 'input':\n        formTemplate = __jsx(\"div\", null, formdata.showlabel ? __jsx(\"p\", null, formdata.config.label) : null, Prefix && __jsx(Prefix, null), __jsx(\"input\", _extends({}, formdata.config, {\n          value: formdata.value,\n          onBlur: event => change({\n            event,\n            id,\n            blur: true\n          }),\n          onChange: event => change({\n            event,\n            id\n          }),\n          autoComplete: \"off\",\n          onKeyPress: event => {\n            press ? press(event) : null;\n          }\n        })), showError());\n        break;\n\n      case 'select':\n        formTemplate = __jsx(\"div\", {\n          className: \"formBlock\"\n        }, formdata.showlabel ? __jsx(\"p\", null, formdata.config.label) : null, __jsx(\"select\", {\n          value: formdata.value,\n          onBlur: event => change({\n            event,\n            id,\n            blur: true\n          }),\n          onChange: event => change({\n            event,\n            id\n          })\n        }, formdata.config.options.map((item, i) => __jsx(\"option\", {\n          key: i,\n          value: item.key\n        }, item.value))), showError());\n        break;\n\n      case 'textarea':\n        formTemplate = __jsx(\"div\", {\n          className: \"formBlock\"\n        }, formdata.showlabel ? __jsx(\"div\", {\n          className: \"label_inputs\"\n        }, formdata.config.label) : null, __jsx(\"textarea\", _extends({}, formdata.config, {\n          value: formdata.value,\n          onBlur: event => change({\n            event,\n            id,\n            blur: true\n          }),\n          onChange: event => change({\n            event,\n            id\n          })\n        })), showError());\n        break;\n\n      case 'image':\n        const loadImage = event => {\n          const output = document.getElementById('output'); // @ts-ignore\n\n          output.src = URL.createObjectURL(event.target.files[0]); // @ts-ignore\n\n          output.onload = function () {\n            // @ts-ignore\n            URL.revokeObjectURL(output.src); // free memory\n          };\n        };\n\n        formTemplate = __jsx(\"div\", null, formdata.showlabel ? __jsx(\"p\", null, formdata.config.label) : null, __jsx(\"input\", _extends({}, formdata.config, {\n          autoComplete: \"off\",\n          accept: \"image/*\",\n          type: \"file\",\n          onChange: event => {\n            loadImage(event);\n            change({\n              event,\n              id\n            });\n          }\n        })), showError(), __jsx(\"img\", {\n          id: \"output\"\n        }), typeof formdata.value === 'string' && formdata.value !== '' && __jsx(\"img\", {\n          src: formdata.value\n        }));\n        break;\n\n      case 'rich_text':\n        formTemplate = __jsx(\"div\", null, formdata.showlabel ? __jsx(\"p\", null, formdata.config.label) : null, __jsx(Editor, {\n          initialValue: formdata.value,\n          init: {\n            height: 500,\n            menubar: 'insert',\n            // images_upload_url: '/api/post/image',\n            image_title: true,\n            automatic_uploads: true,\n            file_picker_types: 'image',\n            plugins: ['advlist autolink lists link image charmap print preview anchor', 'searchreplace visualblocks code fullscreen', 'insertdatetime media table paste code help wordcount'],\n            toolbar: 'undo redo | formatselect | bold italic backcolor | \\\n                  alignleft aligncenter alignright alignjustify | \\\n                  bullist numlist outdent indent | removeformat | image |help',\n            // @ts-ignore\n            file_picker_callback: function (cb, value, meta) {\n              const input = document.createElement('input');\n              input.setAttribute('type', 'file');\n              input.setAttribute('accept', 'image/*');\n              /*\n                  Note: In modern browsers input[type=\"file\"] is functional without\n                  even adding it to the DOM, but that might not be the case in some older\n                  or quirky browsers like IE, so you might want to add it to the DOM\n                  just in case, and visually hide it. And do not forget do remove it\n                  once you do not need it anymore.\n                */\n\n              input.onchange = function () {\n                // @ts-ignore\n                const file = this.files[0];\n                const reader = new FileReader();\n\n                reader.onload = function () {\n                  /*\n                      Note: Now we need to register the blob in TinyMCEs image blob\n                      registry. In the next release this part hopefully won't be\n                      necessary, as we are looking to handle it internally.\n                    */\n                  const id = 'blobid' + new Date().getTime(); // @ts-ignore\n\n                  const blobCache = tinymce.activeEditor.editorUpload.blobCache; // @ts-ignore\n\n                  const base64 = reader.result.split(',')[1];\n                  const blobInfo = blobCache.create(id, file, base64);\n                  blobCache.add(blobInfo);\n                  /* call the callback and populate the Title field with the file name */\n\n                  cb(blobInfo.blobUri(), {\n                    title: file.name\n                  });\n                };\n\n                reader.readAsDataURL(file);\n              };\n\n              input.click();\n            },\n            content_style: 'body { font-family:Helvetica,Arial,sans-serif; font-size:14px }'\n          },\n          onEditorChange: event => change({\n            event,\n            id\n          })\n        }), showError());\n        break;\n\n      default:\n        formTemplate = null;\n    }\n\n    return formTemplate;\n  };\n\n  return __jsx(React.Fragment, null, renderTemplate());\n};\n\nexport default Formfield;","map":{"version":3,"sources":["/media/robert/DATA/Work/web-project/phuong-nam/src-code/components/FormField/index.tsx"],"names":["React","Editor","Formfield","formdata","change","id","Prefix","press","showError","errorMessage","validation","valid","validationMessage","renderTemplate","formTemplate","element","showlabel","config","label","value","event","blur","options","map","item","i","key","loadImage","output","document","getElementById","src","URL","createObjectURL","target","files","onload","revokeObjectURL","height","menubar","image_title","automatic_uploads","file_picker_types","plugins","toolbar","file_picker_callback","cb","meta","input","createElement","setAttribute","onchange","file","reader","FileReader","Date","getTime","blobCache","tinymce","activeEditor","editorUpload","base64","result","split","blobInfo","create","add","blobUri","title","name","readAsDataURL","click","content_style"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Editor } from '@tinymce/tinymce-react';\n\ninterface FormElement {\n  element: string;\n  value: string;\n  config?: any;\n  validation: {\n    required?: boolean;\n    email?: boolean;\n    password?: boolean;\n    confirm?: string;\n    label?: string;\n  };\n  valid: boolean;\n  touched?: boolean;\n  validationMessage?: string;\n  showlabel?: boolean;\n}\n\ninterface Change {\n  event: any;\n  id: string;\n  blur?: boolean;\n}\ninterface Props {\n  formdata: FormElement;\n  id: string;\n  change(change: Change): void;\n  Prefix?: any;\n  press?: any;\n}\n\nconst Formfield = ({ formdata, change, id, Prefix, press }: Props) => {\n  const showError = () => {\n    let errorMessage = null;\n\n    if (formdata.validation && !formdata.valid) {\n      errorMessage = <span>{formdata.validationMessage}</span>;\n    }\n\n    return errorMessage;\n  };\n\n  const renderTemplate = () => {\n    let formTemplate = null;\n\n    switch (formdata.element) {\n      case 'input':\n        formTemplate = (\n          <div>\n            {formdata.showlabel ? <p>{formdata.config.label}</p> : null}\n            {Prefix && <Prefix />}\n            <input\n              {...formdata.config}\n              value={formdata.value}\n              onBlur={(event) => change({ event, id, blur: true })}\n              onChange={(event) => change({ event, id })}\n              autoComplete=\"off\"\n              onKeyPress={(event) => {\n                press ? press(event) : null;\n              }}\n            />\n            {showError()}\n          </div>\n        );\n        break;\n      case 'select':\n        formTemplate = (\n          <div className=\"formBlock\">\n            {formdata.showlabel ? <p>{formdata.config.label}</p> : null}\n            <select\n              value={formdata.value}\n              onBlur={(event) => change({ event, id, blur: true })}\n              onChange={(event) => change({ event, id })}\n            >\n              {/* <option value=\"\">Select one</option> */}\n              {formdata.config.options.map((item: any, i: number) => (\n                <option key={i} value={item.key}>\n                  {item.value}\n                </option>\n              ))}\n            </select>\n            {showError()}\n          </div>\n        );\n        break;\n      case 'textarea':\n        formTemplate = (\n          <div className=\"formBlock\">\n            {formdata.showlabel ? <div className=\"label_inputs\">{formdata.config.label}</div> : null}\n            <textarea\n              {...formdata.config}\n              value={formdata.value}\n              onBlur={(event) => change({ event, id, blur: true })}\n              onChange={(event) => change({ event, id })}\n            />\n            {showError()}\n          </div>\n        );\n        break;\n      case 'image':\n        const loadImage = (event: any) => {\n          const output = document.getElementById('output');\n          // @ts-ignore\n          output.src = URL.createObjectURL(event.target.files[0]);\n          // @ts-ignore\n          output.onload = function () {\n            // @ts-ignore\n            URL.revokeObjectURL(output.src); // free memory\n          };\n        };\n\n        formTemplate = (\n          <div>\n            {formdata.showlabel ? <p>{formdata.config.label}</p> : null}\n\n            <input\n              {...formdata.config}\n              autoComplete=\"off\"\n              accept=\"image/*\"\n              type=\"file\"\n              onChange={(event) => {\n                loadImage(event);\n                change({ event, id });\n              }}\n            />\n            {showError()}\n            <img id=\"output\" />\n            {typeof formdata.value === 'string' && formdata.value !== '' && <img src={formdata.value} />}\n          </div>\n        );\n        break;\n      case 'rich_text':\n        formTemplate = (\n          <div>\n            {formdata.showlabel ? <p>{formdata.config.label}</p> : null}\n\n            <Editor\n              initialValue={formdata.value}\n              init={{\n                height: 500,\n                menubar: 'insert',\n                // images_upload_url: '/api/post/image',\n                image_title: true,\n                automatic_uploads: true,\n                file_picker_types: 'image',\n                plugins: [\n                  'advlist autolink lists link image charmap print preview anchor',\n                  'searchreplace visualblocks code fullscreen',\n                  'insertdatetime media table paste code help wordcount',\n                ],\n                toolbar:\n                  'undo redo | formatselect | bold italic backcolor | \\\n                  alignleft aligncenter alignright alignjustify | \\\n                  bullist numlist outdent indent | removeformat | image |help',\n                // @ts-ignore\n                file_picker_callback: function (cb: any, value: any, meta: any) {\n                  const input = document.createElement('input');\n                  input.setAttribute('type', 'file');\n                  input.setAttribute('accept', 'image/*');\n\n                  /*\n                      Note: In modern browsers input[type=\"file\"] is functional without\n                      even adding it to the DOM, but that might not be the case in some older\n                      or quirky browsers like IE, so you might want to add it to the DOM\n                      just in case, and visually hide it. And do not forget do remove it\n                      once you do not need it anymore.\n                    */\n\n                  input.onchange = function () {\n                    // @ts-ignore\n                    const file = this.files[0];\n\n                    const reader = new FileReader();\n                    reader.onload = function () {\n                      /*\n                          Note: Now we need to register the blob in TinyMCEs image blob\n                          registry. In the next release this part hopefully won't be\n                          necessary, as we are looking to handle it internally.\n                        */\n                      const id = 'blobid' + new Date().getTime();\n                      // @ts-ignore\n                      const blobCache = tinymce.activeEditor.editorUpload.blobCache;\n                      // @ts-ignore\n                      const base64 = reader.result.split(',')[1];\n                      const blobInfo = blobCache.create(id, file, base64);\n                      blobCache.add(blobInfo);\n\n                      /* call the callback and populate the Title field with the file name */\n                      cb(blobInfo.blobUri(), { title: file.name });\n                    };\n                    reader.readAsDataURL(file);\n                  };\n\n                  input.click();\n                },\n                content_style: 'body { font-family:Helvetica,Arial,sans-serif; font-size:14px }',\n              }}\n              onEditorChange={(event) => change({ event, id })}\n            />\n            {showError()}\n          </div>\n        );\n        break;\n      default:\n        formTemplate = null;\n    }\n\n    return formTemplate;\n  };\n\n  return <>{renderTemplate()}</>;\n};\n\nexport default Formfield;\n"]},"metadata":{},"sourceType":"module"}